Основные изменения 3 задания в fraction, map, game

Изменения концепции: бой между армиями теперь рассчитывается автоматически (в качестве затычки ради создания первой играбельной версии).

Добавлена возможность непосредственно играть. Число фракций пока ограниченно двумя, но никакие механики не ограничивают этого числа этого числа (для добавления фракции достаточно добавить соответствующий unit_creaor). Пока доступна только игра на 2 игроков с одного компьютера.

1)За ход выполняется одно действие. Пока доступны создание и передвижение армий.
2)В начале хода игрок получает некоторое колличество золота (от 50 до 100), которое зависит от колличества армий.
3)При создании указываются пропорции родов войск в армии, число юнитов определённого типа высчитвается как (число золота у фракции)*(доля в общем числе юнитов в армии). Золото обнуляется.
4)При передвижении, игрок выбирает армию и от 1 до 3 направлений движеиня. Если армии из разных фракций оказались на одном квадрате, между ними происходит автоматическое сражение, в результате которого в квадрате остаются армии только одной фракции.


Изначально для работы с командами планировалось использовать паттерн Command, но по мере написания я заметил, что у меня получается 3 различных состояния, в каждом из которых я хочу иметь разный интерфейс работы со схожим набором функций. Поэтому я отказался от Command и решил истользовать State. Также State значительно упростит добавление в будущем дополнительных элементов игры, слабо связанных с нынешними (например, локального сражения), которые существенно усложнят её структуру.


Карта реализованна как двумерный массив локаций. Для комфортной и быстрой работы с картой используется паттерн Observer. Каждая армия хранит список указателей на армии, которые на неё подписанны. При создании армия подписывается на место создания, при передвижении меняет подписку. Если армия оказалась на новой клетке, она смотрит на другие армии, которые подписанны на эту клетку и, если это армии противника, сражается с ними.
